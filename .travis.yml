sudo: enabled

dist: xenial

language: generic

branches:
  only:
    - master

git:
  submodules: false

env:
  global:
    - E3_PATH=${TRAVIS_BUILD_DIR}/epics
    - E3_SRC_PATH=${TRAVIS_BUILD_DIR}/e3
    - BASE=7.0.3
    - TAG=7.0.3
    - REQUIRE=3.1.0

    
    
    
before_install:
  - sudo apt-get -qq update  > /dev/null 2>&1 
  - sudo apt-get install -y linux-headers-$(uname -r)   > /dev/null 2>&1 
  - sudo apt-get install -y build-essential realpath ipmitool libtool automake tclx  tree screen re2c darcs  > /dev/null 2>&1 
  - sudo apt-get install -y libreadline-dev libxt-dev x11proto-print-dev libxmu-headers libxmu-dev libxpm-dev libxmuu-dev libxmuu1 libpcre++-dev python-dev libnetcdf-dev libhdf5-dev libpng-dev libbz2-dev libxml2-dev libusb-dev libusb-1.0-0-dev libudev-dev libsnmp-dev libraw1394-dev libboost-dev libboost-regex-dev libboost-filesystem-dev libopencv-dev > /dev/null 2>&1
  - sudo apt-get install -y libtirpc-dev > /dev/null 2>&1
  - bash .ci/prepare_e3.bash

install:
  - pushd e3TemplateGenerator
  - answer=N | bash e3TemplateGenerator.bash -m modules_conf/siteApps-template-genesysGEN5kWPS.conf
  - pushd e3-genesysGEN5kWPS
  - make vars
  - make init
  - make build
  - make install
  - make existent LEVEL=4
  - popd
  - answer=N | bash e3TemplateGenerator.bash -m modules_conf/siteApps-template-localexample.conf
  - pushd e3-example
  - make vars
  - make build
  - make install
  - make existent LEVEL=4
  - popd
  - answer=N | bash e3TemplateGenerator.bash -m modules_conf/siteMods-template-MCoreUtils.conf
  - pushd  e3-MCoreUtils
  - make vars
  - make init
  - make build
  - make install
  - make existent LEVEL=4
  - popd

